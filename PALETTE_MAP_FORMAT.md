# PALETTE MAP Format (.pmap)

## Overview
The PALETTE MAP format is a JSON-based file format designed to store color palette information along with precise pixel position data from images. It uses the `.pmap` file extension.

## Purpose
- Map unique colors from an image to their exact pixel locations
- Provide a structured format for color analysis and manipulation
- Enable precise color-to-position mapping for image processing applications

## File Structure
The `.pmap` file contains a JSON object where each key represents a unique color ID (starting from "1") and each value contains color and position information.

### Root Structure
```json
{
  "1": { /* Color ID 1 data */ },
  "2": { /* Color ID 2 data */ },
  "3": { /* Color ID 3 data */ },
  ...
}
```

### Color Entry Structure
Each color entry contains:
- `hex`: Hexadecimal color representation (RRGGBBAA format)
- `positions`: Array of pixel coordinates where this color appears

```json
{
  "unique_id": {
    "hex": "#rrggbbaa",
    "positions": [
      {"x": int, "y": int},
      {"x": int, "y": int},
      ...
    ]
  }
}
```

## Example File
```json
{
  "1": {
    "hex": "#ff0000ff",
    "positions": [
      {"x": 10, "y": 5},
      {"x": 15, "y": 20},
      {"x": 32, "y": 18}
    ]
  },
  "2": {
    "hex": "#00ff00ff",
    "positions": [
      {"x": 25, "y": 30},
      {"x": 40, "y": 45}
    ]
  },
  "3": {
    "hex": "#0000ffff",
    "positions": [
      {"x": 100, "y": 200}
    ]
  }
}
```

## Data Types
- **Unique ID**: String (sequential numbers starting from "1")
- **Hex Color**: String (8-character hex with alpha: #RRGGBBAA)
- **Position Coordinates**: Integers (x, y pixel coordinates)

## Coordinate System
- Origin (0,0) is at the top-left corner of the image
- X-axis increases rightward
- Y-axis increases downward
- All coordinates are integers representing pixel positions

## Use Cases
1. **Image Analysis**: Analyze color distribution and positioning
2. **Color Mapping**: Map colors between different palettes while preserving positions
3. **Selective Editing**: Target specific colors at precise locations
4. **Color Statistics**: Generate reports on color usage and distribution
5. **Reverse Engineering**: Recreate images from color and position data

## Compatibility
- Standard JSON format for cross-platform compatibility
- Human-readable text format
- Can be processed by any JSON parser
- Suitable for version control systems

## Technical Notes
- File encoding: UTF-8
- JSON format follows RFC 7159 standard
- Position arrays can be empty for colors not present in the image
- Colors are stored in RGBA format with full alpha channel support
- Maximum coordinate values depend on source image dimensions

## Creation
PALETTE MAP files are typically generated by:
1. Loading an image in a palette editor
2. Extracting unique colors from the image
3. Mapping each color to its pixel positions
4. Exporting the data structure as a `.pmap` file

## Validation
A valid PALETTE MAP file must:
- Be valid JSON
- Have string keys for unique IDs
- Contain "hex" and "positions" fields for each color entry
- Use 8-character hex color format (#RRGGBBAA)
- Have integer coordinates in position arrays